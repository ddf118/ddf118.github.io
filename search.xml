<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>项目部署</title>
      <link href="/2019/01/22/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"/>
      <url>/2019/01/22/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="零-项目部署前提"><a href="#零-项目部署前提" class="headerlink" title="零.项目部署前提"></a>零.项目部署前提</h2><p>阿里云地址：120.77.174.68<br>本地ip：127.0.0.1<br>MySQL： 3306端口<br>Redis： 6379端口</p><h2 id="一-安装数据库"><a href="#一-安装数据库" class="headerlink" title="一.安装数据库"></a>一.安装数据库</h2><h3 id="安装MariaDB或者安装MySQL"><a href="#安装MariaDB或者安装MySQL" class="headerlink" title="安装MariaDB或者安装MySQL"></a>安装MariaDB或者安装<a href="">MySQL</a></h3><h3 id="安装MariaDB"><a href="#安装MariaDB" class="headerlink" title="安装MariaDB"></a>安装MariaDB</h3><p>安装命令：<code>yum -y install mariadb mariadb-server</code><br>安装完成MariaDB，首先启动MariaDB：<code>systemctl start mariadb</code><br>设置开机启动：<code>systemctl enable mariadb</code></p><h2 id="二-设置MariaDB密码"><a href="#二-设置MariaDB密码" class="headerlink" title="二.设置MariaDB密码"></a>二.设置MariaDB密码</h2><p>命令: <code>mysql_secure_installation</code></p><pre><code>Enter current password for root:&lt;–初次运行直接回车设置密码Set root password? [Y/n] &lt;– 是否设置root用户密码，输入y并回车或直接回车New password: &lt;– 设置root用户的密码Re-enter new password: &lt;– 再输入一次你设置的密码其他配置Remove anonymous users? [Y/n] &lt;– 是否删除匿名用户，回车Disallow root login remotely? [Y/n] &lt;–是否禁止root远程登录,回车,Remove test database and access to it? [Y/n] &lt;– 是否删除test数据库，回车Reload privilege tables now? [Y/n] &lt;– 是否重新加载权限表，回车</code></pre><p>初始化MariaDB完成，接下来测试登录<br><code>mysql -u root -p</code></p><h2 id="三-开启远程连接"><a href="#三-开启远程连接" class="headerlink" title="三.开启远程连接"></a>三.开启远程连接</h2><p>在mysql数据库中的user表中可以看到默认是只能本地连接的，所有可以添加一个新的用户，该用户可以远程访问<br>1.创建用户（进入mysql后）<br> 先使用数据库<br><code>use mysql;</code></p><p> 针对ip<br><code>create user &#39;root&#39;@&#39;192.168.10.10&#39; identified by &#39;密码&#39;;</code></p><p> 全部（用这个就行）<br> <code>create user &#39;root&#39;@&#39;%&#39; identified by &#39;密码&#39;;</code></p><ol start="2"><li><p>授权<br>给用户最大权限（用这个就行）<br><code>grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;密码&#39;;</code></p><p>给部分权限(test 数据库)</p></li></ol><p><code>grant all privileges on test.* to &#39;root&#39;@&#39;%&#39; identified by &#39;password&#39; with grant option;</code></p><p> 刷新权限表<br><code>flush privileges;</code></p><p> 查看<br><code>show grants for &#39;root&#39;@&#39;localhost&#39;;</code><br>接下来就可以在远程的数据库可视化工具中直接访问该服务器中的mysql了。</p><p> 访问数据库<br><code>mysql -u root -p</code><br><img src="/img/deploy1.jpg" alt="1"></p><h2 id="四-安装python3-6"><a href="#四-安装python3-6" class="headerlink" title="四.安装python3.6"></a>四.安装python3.6</h2><p>首先安装依赖包</p><p>安装Python3.6所需要的依赖包：</p><p><code>yum -y groupinstall &quot;Development tools&quot;</code></p><p><code>yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</code></p><p>安装Python3.7还需额外安装依赖包：<br><code>yum install libffi-devel -y</code></p><p>然后根据自己需求下载不同版本的Python3，我下载的是Python3.6.2</p><p><code>wget https://www.python.org/ftp/python/3.6.2/Python-3.6.2.tar.xz</code></p><p>然后解压压缩包，进入该目录，安装Python3</p><p><code>tar -xvJf  Python-3.6.2.tar.xz</code><br><code>cd Python-3.6.2</code><br><code>./configure --prefix=/usr/local/python3</code><br><code>make &amp;&amp; make install</code></p><p>最后创建软链接</p><p><code>ln -s /usr/local/python3/bin/python3 /usr/bin/python3</code></p><p><code>ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3</code></p><h2 id="五-安装环境"><a href="#五-安装环境" class="headerlink" title="五.安装环境"></a>五.安装环境</h2><ol><li>安装virtualenv<br><code>yum install python-virtualenv</code></li><li>创建虚拟环境<br><code>virtualenv --no-site-packages -p /usr/bin/python3 env1</code></li></ol><p><code>cd env1</code></p><p> 激活虚拟环境<br><code>source bin/activate</code><br>xftp传输项目或者<a href="">scp传输</a></p><ol start="3"><li>安装环境需要的包<br><code>pip3 install -r re_install.txt</code></li></ol><p>其中re_install.txt文件中记录的是需要安装包的名称以及对应的版本</p><h3 id="环境绝对路径安装"><a href="#环境绝对路径安装" class="headerlink" title="环境绝对路径安装"></a>环境绝对路径安装</h3><p>/home/env/env1/bin/pip3 install -r /home/src/fresh_shop/requirement.txt</p><h3 id="绝对路径启动项目"><a href="#绝对路径启动项目" class="headerlink" title="绝对路径启动项目"></a>绝对路径启动项目</h3><p>/home/env/env1/bin/python3 /home/src/fresh_shop/manage.py runserver 0.0.0.0:80</p><p><code>netstat -lntp</code> 查看端口使用</p><h2 id="六-部署"><a href="#六-部署" class="headerlink" title="六.部署"></a>六.部署</h2><h3 id="1-测试环境中部署方式"><a href="#1-测试环境中部署方式" class="headerlink" title="1. 测试环境中部署方式"></a>1. 测试环境中部署方式</h3><p>1.1修改settings.py配置文件，将DEBUG=False模式，修改ALLOEWD_HOST=[‘*’]<br>1.2.中间件的修改</p><pre><code># 不需要做登录校验的地址        not_need_check = [&#39;/user/register/&#39;, &#39;/user/login/&#39;,                          &#39;/goods/index/&#39;, &#39;/goods/detail/.*/&#39;,                          &#39;/cart/.*/&#39;,&#39;/static/.*/&#39;,&#39;/media/.*/&#39;]# &#39;/static/.*/&#39;,&#39;/media/.*/&#39;</code></pre><p>1.3.修改工程目录下的urls.py</p><pre><code>from django.contrib import adminfrom django.urls import path, include,re_pathfrom django.contrib.staticfiles.urls import staticfrom fresh_shop.settings import MEDIA_URL, MEDIA_ROOT, STATICFILES_DIRSfrom goods import viewsfrom django.views.static import serveurlpatterns = [    path(&#39;admin/&#39;, admin.site.urls),    # 导入应用    path(&#39;cart/&#39;, include((&#39;cart.urls&#39;, &#39;cart&#39;), namespace=&#39;cart&#39;)),    path(&#39;goods/&#39;, include((&#39;goods.urls&#39;, &#39;goods&#39;), namespace=&#39;goods&#39;)),    path(&#39;order/&#39;, include((&#39;order.urls&#39;, &#39;order&#39;), namespace=&#39;order&#39;)),    path(&#39;user/&#39;, include((&#39;user.urls&#39;, &#39;user&#39;), namespace=&#39;user&#39;)),    # 首页路径    path(&#39;&#39;, views.index),    re_path(r&#39;^static/(?P&lt;path&gt;.*)$&#39;, serve, {&quot;document_root&quot;: STATICFILES_DIRS[0]}),    re_path(r&#39;^media/(?P&lt;path&gt;.*)$&#39;, serve, {&quot;document_root&quot;: MEDIA_ROOT}),</code></pre><p>1.4.创建脚本文件<br>在src目录中创建一个sh脚本<br>[root@izwz9gtgjgu8as4jaamzxzz src]# touch freshshop.sh<br>在sh脚本里面添加绝对路径启动<br>[root@izwz9gtgjgu8as4jaamzxzz src]# vim freshshop.sh<br><code>/home/env/env1/bin/python3 /home/src/fresh_shop/manage.py runserver 0.0.0.0:80</code><br>1.5.修改脚本文件权限<br>[root@izwz9gtgjgu8as4jaamzxzz src]# chmod -R 777 freshshop.sh<br>1.6.启动<br>nohup：不挂断地运行命令。<br>&amp;：挂后台<br>[root@izwz9gtgjgu8as4jaamzxzz src]# <code>nohup ./freshshop.sh &amp;</code></p><h3 id="2-正式环境中部署方式"><a href="#2-正式环境中部署方式" class="headerlink" title="2. 正式环境中部署方式"></a>2. 正式环境中部署方式</h3><p>正式环境中部署为nginx+uwsgi来部署django项目<br>2.1 安装nginx<br>a）添加nginx存储库<br><code>yum install epel-release</code><br>b) 安装nginx<br><code>yum install nginx</code><br>c) 运行nginx<br>Nginx不会自行启动。要运行Nginx则需输入<br><code>systemctl start nginx</code><br>nginx的运行命令：<br> <code>systemctl status nginx</code> 查看nginx的状态<br> <code>systemctl start/stop/enable/disable nginx</code> 启动/关闭/设置开机启动/禁止开机启动<br>d）系统启动时启用Nginx<br><code>systemctl enable nginx</code><br>e）如果您正在运行防火墙，请运行以下命令以允许HTTP和HTTPS通信：</p><p><code>sudo firewall-cmd --permanent --zone=public --add-service=http</code></p><p><code>sudo firewall-cmd --permanent --zone=public --add-service=https</code></p><p><code>sudo firewall-cmd --reload</code></p><h3 id="3-配置uwsgi"><a href="#3-配置uwsgi" class="headerlink" title="3.配置uwsgi"></a>3.配置uwsgi</h3><p>3.1 安装uwsgi<br>在虚拟环境中安装uwsgi，假设虚拟环境安装在/home/env/env1中<br>使用<code>/home/env/env1/bin/pip3 install uwsgi</code></p><h3 id="4-配置项目代码，配置项目nginx，配置uwsgi-ini等"><a href="#4-配置项目代码，配置项目nginx，配置uwsgi-ini等" class="headerlink" title="4.配置项目代码，配置项目nginx，配置uwsgi.ini等"></a>4.配置项目代码，配置项目nginx，配置uwsgi.ini等</h3><p>本案例的配置文件，都习惯将每一个项目的配置文件，日志文件，虚拟环境放在一起，这样开发方便，运维也方便维护<br>项目的目录结构如下：<code>conf env logs src</code><br>其中：</p><p>conf是配置文件，用于存放项目的nginx.conf文件，uwsgi.ini文件</p><p>logs是日志文件，用于存放nginx的启动成功和失败文件，以及uwsgi的运行日志文件</p><p>env是用于存放虚拟环境</p><p>src是项目文件，该目录下上传的是目录代码</p><p>4.1 配置nginx.conf文件<br>在conf下面创建一个名为freshnginx.conf的文件<br>首先：编写自己项目的conf文件如下：</p><pre><code>server {    listen        80;    server_name 120.77.174.68;    access_log /home/logs/freshaccess.log;    error_log /home/logs/fresherror.log;    location / {        include uwsgi_params;        uwsgi_pass 127.0.0.1:8890;    }    location /static/ {        alias /home/src/fresh_shop/static/;    }    location /media/ {        alias /home/src/fresh_shop/media/;    }}</code></pre><p>其次：修改总的nginx的配置文件，让总的nginx文件包含我们自定义的项目的freshnginx.conf文件</p><p>总的nginx配置文件在：/etc/nginx/nginx.conf中</p><p><img src="/img/deploy2.png" alt="2"><br>以上步骤操作完成以后，需要重启nginx：<br><code>systemctl restart nginx</code><br>查看运行状态<br><code>systemctl status nginx</code><br>4.2 配置uwsgi文件<br>在conf文件夹下除了包含自定义的freshnginx.conf文件，还有我们定义的uwsgi.ini文件</p><pre><code>[uwsgi]# 守护进程master = true# 进程个数processes = 4# 项目地址chdir = /home/src/fresh_shop# 指定python版本pythonpath = /home/env/env1/bin/python3# 指定uwsgi文件module = fresh_shop.wsgi# 和nginx通信地址:端口socket = 127.0.0.1:8890# 日志文件地址logto = /home/logs/freshuwsgi.log</code></pre><p>运行项目:<br><code>/home/env/env1/bin/uwsgi --ini /home/conf/freshuwsgi.ini &amp;</code></p>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB后端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Postman</title>
      <link href="/2019/01/22/Postman/"/>
      <url>/2019/01/22/Postman/</url>
      
        <content type="html"><![CDATA[<p>Postman</p>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB后端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>/和\的区别</title>
      <link href="/2019/01/22/%E6%96%9C%E6%9D%A0%E7%8E%A9%E8%80%8D/"/>
      <url>/2019/01/22/%E6%96%9C%E6%9D%A0%E7%8E%A9%E8%80%8D/</url>
      
        <content type="html"><![CDATA[<h3 id="正斜杠"><a href="#正斜杠" class="headerlink" title="正斜杠/"></a>正斜杠/</h3><p>“/”是表示非本地的路径分隔。</p><h3 id="反斜杠"><a href="#反斜杠" class="headerlink" title="反斜杠\"></a>反斜杠\</h3><p>本地路径表示用“\”表示母文件夹与子文件夹的层次关系。</p><h3 id="二者区别"><a href="#二者区别" class="headerlink" title="二者区别"></a>二者区别</h3><p>“\”、“/”的区别其实在与区别本地与非本地。<br>1.浏览器地址栏网址使用 正斜杠/；<br>2.windows文件浏览器上使用 反斜杠\；<br>3.出现在<code>html url()</code>属性中的路径，指定的路径是网络路径，所以必须使用 正斜杠/；<br>4.出现在普通字符串的路径，如果代表的是windows文件路径，则使用 正斜杠/和 反斜杠\是一样的；如果代表的是网络文件路径，则必须使用 正斜杠/；</p><p>另外在编程中，常用反斜杠\加字符表示转义字符，如\0表示“空字符”\r表示“回车”，\n表示“换行”等。</p><p>而<code>\\</code>则表示反斜杠\的转义字符，在编程中常用于表示反斜杠\不是普通的字符，而是路径的分隔符。如用一个字符串存储保存文件的路径时，路径为<code>F:\caffe\Temp\image.jpg</code>;则用字符串存储时，应该写为<code>str=F:\\caffe\\Temp\\image.jpg</code>;</p><p>因为若不这样表示，则反斜杠\将会当作普通字符，而非路径的分隔符。</p>]]></content>
      
      
      <categories>
          
          <category> 技术类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 斜杠 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Markdown</title>
      <link href="/2019/01/03/markdown/"/>
      <url>/2019/01/03/markdown/</url>
      
        <content type="html"><![CDATA[<h2 id="Markdown语法规范"><a href="#Markdown语法规范" class="headerlink" title="Markdown语法规范:"></a>Markdown语法规范:</h2><h3 id="Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。"><a href="#Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。" class="headerlink" title="Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。?"></a>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。?</h3><p>这里只写一些易错点及原始，<a href="https://www.jianshu.com/p/3a475c1d92da" target="_blank" rel="noopener">详见1</a>,<a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin" target="_blank" rel="noopener">详见2</a><br>标题的#号后面有空格。<br>图片为<code>![](url)</code><br>超链接<code>[](url)</code><br>代码<code></code></p>]]></content>
      
      
      <categories>
          
          <category> 技术类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 语言规范 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hexo的图片及超链接玩法</title>
      <link href="/2019/01/03/hexofun/"/>
      <url>/2019/01/03/hexofun/</url>
      
        <content type="html"><![CDATA[<h3 id="hexo的图片的玩法"><a href="#hexo的图片的玩法" class="headerlink" title="hexo的图片的玩法"></a>hexo的图片的玩法</h3><h4 id="给自己的文章添加图片-直接在网站上看，别在本地看"><a href="#给自己的文章添加图片-直接在网站上看，别在本地看" class="headerlink" title="给自己的文章添加图片(直接在网站上看，别在本地看)"></a>给自己的文章添加图片(直接在网站上看，别在本地看)</h4><p>在Markdown中<code>![图片名](url)</code>，这里面的url若是网上的则直接弄过来就可以；坑为本地上传的图片地址，在hexo文件夹的source文件夹(不是主题中的source)中创建一个文件夹img用来保存图片，然后url写成<code>/img/图片名.格式</code>即可。<br>标题那添加则和上面类似，<code>img: url</code>，url与上面一样。</p><pre><code>---title: img: ---</code></pre><h4 id="给自己的字段添加超链接"><a href="#给自己的字段添加超链接" class="headerlink" title="给自己的字段添加超链接"></a>给自己的字段添加超链接</h4><p>在Markdown中<code>[字段](url)</code>，url建议不用本地，因为本人还没玩透。</p>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HEXO </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JavaScript</title>
      <link href="/2019/01/02/JavaScript/"/>
      <url>/2019/01/02/JavaScript/</url>
      
        <content type="html"><![CDATA[<ul><li>JavaScript - 交互行为 - behavior</li><li>语法规范 - ECMAScript</li><li>BOM - 浏览器对象模型 - window</li><li>DOM - 文档对象模型 - document</li><li>getElementById() / getElementsByTagName() / getElementsByClassName() / querySelector() / querySelectorAll()</li><li>createElement() / appendChild() / insertBefore()</li><li>removeChild()</li><li>innerHTML / textContent / className / style</li><li>parentNode / children / prevSibling / nextSibling</li><li>addEventListener / removeEventListener</li><li>jQuery —&gt; window.$ / window.jQuery </li><li>$(‘样式表选择器’)：获取页面元素返回jQuery对象</li><li>$(‘&lt;标签&gt;’)：创建新元素得到jQuery对象</li><li>$(原生JavaScript对象)：将原生JS对象转成jQuery对象</li><li>$(function() {})：绑定页面加载完成之后要执行的回调函数</li></ul>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB前端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS</title>
      <link href="/2019/01/02/CSS/"/>
      <url>/2019/01/02/CSS/</url>
      
        <content type="html"><![CDATA[<p>CSS - 渲染页面 - display </p><ul><li>选择器</li><li>通配符选择器</li><li>标签选择器</li><li>类选择器</li><li>ID选择器</li><li>属性选择器</li><li>后代选择器 / 父子选择器</li><li>兄弟选择器 / 相邻兄弟选择器</li><li>伪类 / 伪元素</li><li>就近原则/具体性原则/重要性原则</li><li>盒子模型（内容-padding-border-背景图-背景色-margin）</li><li>常用样式属性和常用属性值</li></ul>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB前端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>HTML</title>
      <link href="/2019/01/02/HTML/"/>
      <url>/2019/01/02/HTML/</url>
      
        <content type="html"><![CDATA[<p>HTML标签 - 承载内容 - content</p>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB前端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>pycharm构建Django</title>
      <link href="/2019/01/02/pycharm%E6%9E%84%E5%BB%BADjango/"/>
      <url>/2019/01/02/pycharm%E6%9E%84%E5%BB%BADjango/</url>
      
        <content type="html"><![CDATA[<h3 id="1-通过PyCharm创建Python项目-—-gt-hellodjango"><a href="#1-通过PyCharm创建Python项目-—-gt-hellodjango" class="headerlink" title="1. 通过PyCharm创建Python项目 —&gt; hellodjango"></a>1. 通过PyCharm创建Python项目 —&gt; hellodjango</h3><h3 id="2-在Terminal的虚拟环境中安装依赖项-—-gt"><a href="#2-在Terminal的虚拟环境中安装依赖项-—-gt" class="headerlink" title="2. 在Terminal的虚拟环境中安装依赖项 —&gt;"></a>2. 在Terminal的虚拟环境中安装依赖项 —&gt;</h3><p>   pip install django pymysql django-redis djangorestframework pillow #安装</p><p>   pip check  #检查是否冲突</p><p>   pip freeze &gt; requirements.txt #导出python安装包环境</p><p>备注:<code>pip install -r requirements.txt</code>导入requirements文件</p><h3 id="3-创建Django项目-—-gt"><a href="#3-创建Django项目-—-gt" class="headerlink" title="3. 创建Django项目 —&gt;"></a>3. 创建Django项目 —&gt;</h3><p>   django-admin startproject hellodjango .</p><h3 id="4-运行项目-—-gt"><a href="#4-运行项目-—-gt" class="headerlink" title="4. 运行项目 —&gt;"></a>4. 运行项目 —&gt;</h3><p>   python manage.py runserver<br>   <a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a><br>   <a href="http://127.0.0.1:8000" target="_blank" rel="noopener">http://127.0.0.1:8000</a><br>   python manage.py runserver 0.0.0.0:80<br>   <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a><br>   <a href="http://127.0.0.1" target="_blank" rel="noopener">http://127.0.0.1</a><br>   <a href="http://10.7.187.140" target="_blank" rel="noopener">http://10.7.187.140</a></p><h3 id="5-修改配置文件-—-gt-hellodjango-settings-py"><a href="#5-修改配置文件-—-gt-hellodjango-settings-py" class="headerlink" title="5. 修改配置文件 —&gt; hellodjango/settings.py"></a>5. 修改配置文件 —&gt; hellodjango/settings.py</h3><p>   LANGUAGE_CODE = ‘zh-hans’<br>   TIME_ZONE = ‘Asia/Chongqing’<br>   DATABASES = {<br>   ‘default’: {<br>   ​    ‘BACKEND’: ‘….mysql’,<br>   ​    ‘NAME’: ‘’<br>   ​    ‘HOST’: ‘’,<br>   ​    ‘PORT’: 3306,<br>   ​    ‘USER’: ‘’,<br>   ​    ‘PASSWORD’: ‘’,<br>   ​    ‘TIME_ZONE’: ‘Asia/Chongqing’,<br>   }<br>   }</p><h3 id="6-修改init-py文件"><a href="#6-修改init-py文件" class="headerlink" title="6. 修改init.py文件"></a>6. 修改<strong>init</strong>.py文件</h3><p>   import pymysql</p><p>pymysql.install_as_MySQLdb()</p><h3 id="7-生成Django自带的数据表"><a href="#7-生成Django自带的数据表" class="headerlink" title="7. 生成Django自带的数据表"></a>7. 生成Django自带的数据表</h3><p>   python manage.py migrate</p><h3 id="8-创建后台管理员账号"><a href="#8-创建后台管理员账号" class="headerlink" title="8. 创建后台管理员账号"></a>8. 创建后台管理员账号</h3><p>   python manage.py createsuperuser</p>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB后端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Django的初始化以及模型</title>
      <link href="/2019/01/02/Web%E5%90%8E%E7%AB%AF-Django/"/>
      <url>/2019/01/02/Web%E5%90%8E%E7%AB%AF-Django/</url>
      
        <content type="html"><![CDATA[<h3 id="一-构建虚拟环境"><a href="#一-构建虚拟环境" class="headerlink" title="一.构建虚拟环境"></a>一.构建虚拟环境</h3><h4 id="注-本篇方法通过virtualenv直接在命令行模式安装，另有通过pycharm构建"><a href="#注-本篇方法通过virtualenv直接在命令行模式安装，另有通过pycharm构建" class="headerlink" title="注:本篇方法通过virtualenv直接在命令行模式安装，另有通过pycharm构建"></a>注:本篇方法通过virtualenv直接在命令行模式安装，另有通过<a href="https://ddf118.github.io/2019/01/02/pycharm构建Django/">pycharm构建</a></h4><ol><li><p><strong>安装virtualenv</strong></p><p><code>pip install virtualenv</code></p><p>若不成功 配置环境变量</p></li><li><p><strong>创建虚拟环境</strong></p><p><code>d:</code> <code>mkdir env</code>  <code>cd env</code>进入保存环境的文件夹再创建</p><p><code>virtualenv --no-site-package -p 绝对路径 name</code></p><p><code>--no-site-package</code>:表示创建的虚拟环境为纯净的环境。</p><p>若有多个python版本<br><code>-p 绝对路径 name</code>: 表示虚拟环境中使用的python版本</p></li><li><p><strong>pip使用</strong></p><p><code>pip list</code>：查看虚拟环境下安装的所有的包　</p><p><code>pip freeze</code>：查看虚拟环境重通过pip安装的包</p><p><code>pip install xxx</code>: 安装xxx</p></li><li><p><strong>激活虚拟环境</strong><br>cd env/Scripts/ 进入虚拟环境文件夹<br>激活：<br>Windows: 直接执行activate命令<br>Mac/Linux: 直接执行source activate命令<br>在虚拟环境中安装依赖项:</p><pre class=" language-python"><code class="language-python">pip install django pymysql django<span class="token operator">-</span>redis djangorestframework pillow</code></pre></li><li><strong>退出虚拟环境</strong><br> Windows/Mac/Linux: 直接执行deactivate</li></ol><h3 id="二-Django项目"><a href="#二-Django项目" class="headerlink" title="二.Django项目"></a>二.Django项目</h3><ol><li><p><strong>创建项目</strong><br><code>django-admin startproject 项目名称</code></p><p><img src="/img/3.jpg" alt="3"></p></li></ol><ol start="2"><li><p><strong>启动项目</strong><br>启动命令: <code>python manage.py runserver</code>。默认IP为127.0.0.1  默认端口为8000<br>该命令是运行项目，端口可以不用写，启动的时候会默认随机创建一个可以使用的端口</p><p>修改启动端口: python manage.py runserver 端口<br>修改IP和端口: python manage.py runserver IP:端口<br>IP参数: 如果为0.0.0.0表示任何人都可以通过公网IP访问django项目<br>端口PORT参数: 如果端口设置为80，表示该端口可以不用写</p></li><li><p><strong>创建app</strong><br><code>python manage.py startapp 名字</code></p></li></ol><h3 id="三-Django模式"><a href="#三-Django模式" class="headerlink" title="三.Django模式"></a>三.Django模式</h3><p>MVT模式是由MVC模式演变出来的。</p><p><strong>MVT/MTV:</strong><br>​    M: models.py,模型层,定义模型和数据库中的表之间的关联关系<br>​    V: views.py,视图层,定义业务逻辑的地方<br>​    T: templates,模板,定义HTML页面的地方<br>​<br>补充:MVC模式是所有框架遵循的模式。<br><strong>MVC:</strong><br>​    M: 模型层<br>​    V: 模板，HTML页面<br>​    C: controller，控制器，写业务逻辑的地方</p><h3 id="四-数据库准备工作"><a href="#四-数据库准备工作" class="headerlink" title="四.数据库准备工作"></a>四.数据库准备工作</h3><ol><li><strong>settings.py中配置</strong><pre class=" language-python"><code class="language-python"><span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#ENGINE参数:选用mysql</span><span class="token string">'NAME'</span><span class="token punctuation">:</span> <span class="token string">'dj8'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">#NAME参数: 数据库名</span><span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#HOST参数: 访问数据库的地址</span><span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#PORT参数: 访问数据库的端口</span><span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#USER参数: 访问用户</span><span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#PASSWORD参数: 密码</span><span class="token string">'TIME_ZONE'</span><span class="token punctuation">:</span> <span class="token string">'Asia/Chongqing'</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">#TIME_ZONE:时区</span><span class="token string">'OPTIONS'</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'isolation_level'</span><span class="token punctuation">:</span>None<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">#OPTIONS</span></code></pre><a href="https://docs.djangoproject.com/en/2.1/ref/settings/#databases" target="_blank" rel="noopener">配置详见</a></li></ol><pre class=" language-python"><code class="language-python">LANGUAGE_CODE <span class="token operator">=</span> <span class="token string">'zh-hans'</span> <span class="token comment" spellcheck="true">#设置为中文</span>TIME_ZONE <span class="token operator">=</span> <span class="token string">'Asia/Chongqing'</span> <span class="token comment" spellcheck="true">#时区设为重庆</span></code></pre><ol start="2"><li><strong>安装pymysql</strong><br>使用pymysql连接数据库: 因为python3没有MySQLdb驱动，无法直接连接MySQL<br>在工程目录的<code>__init__.py</code>文件中定义  <code>pymysql.install_as_MySQLdb()</code></li><li><strong>迁移</strong><br>第一次迁移: <code>python manege.py migrate</code><br>除开第一次迁移<br>生成迁移文件: <code>python manage.py makemigrations</code><br>执行迁移文件: <code>python manage.py migrate</code></li><li><strong>插入管理员账号</strong><br><code>python manage.py createsuperuser</code></li></ol><h3 id="五-模型层"><a href="#五-模型层" class="headerlink" title="五.模型层"></a>五.模型层</h3><ol><li><strong>概念</strong><br>objects: 管理器，默认模型的属性<br>ORM(objects relationship mapping): 对象关系映射</li></ol><blockquote><p>添加新的M模型<br>在<code>models.py</code>中添加</p></blockquote><blockquote><p>添加新的路由<br>在<code>urls.py</code>中添加<br><code>path(&#39;name/&#39;,views.name),</code></p></blockquote><blockquote><p>添加新的方法——CDUS<br>在<code>views.py</code>中添加<br>sql在Django中的方法:</p></blockquote><ol start="2"><li><strong>创建C:</strong><br>法一:<code>create()方法: 模型名.objects.create(字段1=值,字段2=值)</code><br><code>Student.objects.create(s_name=&#39;谢霆锋&#39;)</code><br>法二:<code>save()方法: 模型对象.save()</code></li></ol><pre class=" language-python"><code class="language-python">stu <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>stu<span class="token punctuation">.</span>s_name <span class="token operator">=</span> <span class="token string">'唐嫣'</span>stu<span class="token punctuation">.</span>s_gender <span class="token operator">=</span> <span class="token number">1</span>stu<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span> </code></pre><ol start="3"><li><p><strong>删除D:</strong><br><code>delete()方法: 模型名.objects.filter(条件).delete()</code><br><code>Student.objects.filter(id=2).delete()</code></p></li><li><p><strong>修改U:</strong><br>法一:<code>update()方法: 模型名.objects.filter(条件).update(字段1=值,字段2=值)</code><br><code>Student.objects.filter(id=1).update(s_name=&#39;谢霆锋&#39;)</code><br>法二:<code>save()方法: 模型对象.save()</code></p><pre class=" language-python"><code class="language-python">stu <span class="token operator">=</span> Student<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>stu<span class="token punctuation">.</span>s_name <span class="token operator">=</span> <span class="token string">'杨幂'</span>stu<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>update()和save()的区别: 是否更新使用auto_now约束条件的字段,即是否更新更新时间，法一不会更新，法二会更新。</p></li><li><p><strong>查询S:</strong><br><strong>filter()方法:</strong> 查询满足条件的信息: <code>模型名.objects.filter(条件)</code><br><strong>all()方法:</strong> 查询所有: <code>模型名.objects.all()</code><br><strong>get()方法:</strong> 查询指定的条件: <code>模型名.objects.get()</code><br>​    只能返回唯一的一个对象结果<br>​    条件必须成立<br><strong>first()方法:</strong> 取出结果中的第一个对象: <code>模型名.objects.filter().first()</code><br><strong>exclude()方法:</strong> 查询出不满足条件的信息: <code>模型名.objects.exclude(条件)</code><br><strong>order_by()方法:</strong> 升序:<code>模型名.objects.order_by(&#39;id&#39;)</code>  降序:<code>模型名.objects.order_by(&#39;-id&#39;)</code><br><strong>values()方法:</strong> 取查询对象中的字段: <code>模型名.objects.all().values()</code><br><strong>exists()方法:</strong> 判断结果是否存在,存在返回True,否则返回False <code>模型名.objects.filter().exists()</code><br><strong>count()方法:</strong> 计算结果的条数 <code>模型名.objects.filter().count()</code><br><strong>pk:</strong> 主键（就是id）<br><strong>运算符:</strong><br>​    语法: <code>字段__运算符</code><br><strong>模糊查询:</strong><br>​    contains: 包含<br>​    <code>Student.objects.filter(s_name__contains=&#39;小&#39;)</code><br>​    startswith: 以什么开头<br>​    <code>Student.objects.filter(s_name__startswith=&#39;小&#39;)</code><br>​    endswith: 以什么结束<br>​    <code>Student.objects.filter(s_name__endswith=&#39;嫣&#39;)</code><br>​    in: 在某个范围之内<br>​    <code>Student.objects.filter(id__in=[1,2,3,4])</code><br>​    <code>Student.objects.filter(pk__in=[1,2,3,4])</code><br>​    gt,gte: 大于,大于等于<br>​    # 查询年龄大于等于18且小于20<br>​    <code>Student.objects.filter(s_age__gte=18, s_age__lt=20)</code><br>​    lt,lte: 小于,小于等于<br>​    <code>Student.objects.filter(s_age__lt=20)</code><br><strong>聚合:</strong><br>​    <code>from django.db.models import Max, Avg, Min, Sum, Count</code><br>​    语法: <code>模型名.objects.all().aggregate(Sum(字段))</code><br>​  <code>Student.objects.all().aggregate(Max(&#39;s_age&#39;))</code><br>​    <code>Student.objects.all().aggregate(Avg(&#39;s_age&#39;))</code><br>​    <code>Student.objects.all().aggregate(Sum(&#39;s_age&#39;))</code><br><strong>Q()    Q查询对象:</strong><br>​    <code>from django.db.models import Q</code><br>​    与1: Q(条件1), Q(条件2)<br>​    <code>Student.objects.filter(Q(s_age__gte=18), Q(s_age__lt=20))</code><br>​    与2: Q(条件1) &amp; Q(条件2)<br>​    <code>Student.objects.filter(Q(s_age__gte=18) &amp; Q(s_age__lt=20))</code><br>​    或: Q(条件1) | Q(条件2)<br>​    <code>Student.objects.filter(Q(s_age__gte=18) | Q(s_age__lt=20))</code><br>​    非: ~Q(条件1)<br>​    <code>Student.objects.filter(~Q(s_age__gte=18))</code><br><strong>F()    F查询对象:</strong><br>​    <code>from django.db.models import F</code><br>​    用于比较两个字段,可使用+,-符号<br>​    <code>模型名.objects.filter(physics__gt=F(&#39;math&#39;)-10)</code></p></li></ol><h3 id="六-模型设计"><a href="#六-模型设计" class="headerlink" title="六.模型设计"></a>六.模型设计</h3><ol><li>迁移表名的定义 models.py<br>指定db_table参数，表示模型迁移时，映射到数据库中的表名称<br>如果没指定db_table参数,则数据库中模型映射的表名为: 应用名app_模型名称的小写<pre class=" language-python"><code class="language-python"> <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>     db_table <span class="token operator">=</span> <span class="token string">'course'</span></code></pre></li><li>字段类型  models.py<br>CharField: 字符串类型<br>IntegerField: 整型<br>ImageField: 字符串类型,用于存图片<br>BooleanField: 布尔， True 或者 False<br>DateTimeField: 日期, 年月日时分秒<br>DateField: 年月日<br>TextField: 存储长文本内容, areatext标签<br>FloatField: 浮点类型<br>DecimalField: 浮点类型，限制最大长度和小数点后的长度</li><li>约束 models.py<br>unique: 是否唯一<br>default: 默认值<br>null: 是否可以为空<br>primary_key: 主键<br>auto_now_add: 创建时，默认赋值为当前时间<br>auto_now: 创建或修改时，默认赋值为当前时间<br>max_length: 最大长度<br>related_name: 反向查询名称<br>on_delete: 删除的约束条件<br>​    models.CASCADE 删除主表，从表也会被删<br>​    models.PROTECT 不让删除主表，从表可以删<br>​    models.SET_NULL 删除主表，从表的关联字段设置为空</li><li><p>一对一，1:1<br>存储     views.py<br>​    <code>stu_info = StudentInfo()</code><br>​    关联字段存储1： <code>stu_info.关联字段 = 关联对象</code><br>​    <code>stu_info.name = &#39;大霸王&#39;</code><br>​    <code>stu_info.stu = Student.objects.get(id=5)</code><br>​    关联字段存储2: <code>stu_info.关联字段_id = 主键id值</code><br>​    <code>stu_info.stu_id = 5</code><br>查询      views.py<br>​    学生模型和学生拓展模型的定义，一对一<br>​    <strong>查询1:学生对象查询拓展表对象:</strong><br>​    获得学生对象<br>​    <code>stu1 = Student.objects.filter(s_name=&#39;唐嫣&#39;).first()</code><br>​    通过学生对象查询拓展表信息<br>​    <strong>没设置related_name参数时：</strong><code>学生对象.拓展模型名称的小写</code><br>​      ​    法一:正向查询<br>​      ​    ​      ​    <code>stu_info = StudentInfo.objects.filter(stu=stu1).first()</code><br>​      ​        <code>stu_info = StudentInfo.objects.filter(stu_id=stu1.id).first()</code><br>​      ​    法二：反向查询<br>​      ​    ​      ​    <code>stu_info = stu1.studentinfo</code><br>​    <strong>设置related_name参数时：</strong><code>学生对象.related_name参数</code><br>​        <code>stu_info = stu1.info</code><br>​    <strong>查询2:拓展表对象查询学生对象:</strong><br>​    获得拓展表对象<br>​    <code>stu_info = StudentInfo.objects.filter(s_no=&#39;89757&#39;).first()</code><br>​    通过拓展表对象查询学生信息<br>​    <strong>没设置related_name参数时：</strong><code>拓展表对象.OneToOneField定义的字段</code><br>​    <code>stu1 = stu_info.stu</code><br>​    <strong>设置related_name参数时：</strong><code>拓展表对象.OneToOneField定义的字段</code><br>​    <code>stu1 = stu_info.stu</code><br>定义模型：OneToOneField: 定义在关联模型的任何一方都可以</p></li><li><p>一对多<br> 存储<br> ​    #查询id=4的学生对象<br> ​    <code>stu = Student.objects.get(pk=4)</code><br> ​    关联字段的存储1:<code>stu.关系字段 = 关联模型对象</code><br> ​    <code>stu.g = Grade.objects.get(pk=1)</code><br> ​    关联字段的存储2: <code>stu.关系字段_id = 关联表的主键id值</code><br> ​    <code>stu.g_id = 1</code><br> 查询:<br> ​    <strong>查询1：学生查询班级</strong><br> ​            <code>stu = Student.objects.filter(s_name=&#39;小花&#39;).first()</code><br> ​        <strong>没设置related_name参数时：</strong><code>多的一方(学生)对象.关联字段</code><br> ​            <code>grade = stu.g</code><br> ​        <strong>设置related_name参数时：</strong><code>多的一方(学生)对象.关联字段</code><br> ​            <code>grade = stu.g</code><br> ​<br> ​    <strong>查询2：班级查询学生</strong><br> ​            <code>grade = Grade.objects.filter(g_name=&#39;c1801&#39;).first()</code><br> ​        <strong>没设置related_name参数时：</strong><code>一的一方（班级）.关联模型名的小写_set.filter().all()</code><br> ​            <code>stus = grade.student_set.all()</code><br> ​        <strong>设置related_name参数时：</strong><code>一的一方(班级).related_name参数.filter().all()</code><br> ​            <code>stus = grade.stu.all()</code><br> 定义模型：ForeignKey: 定义在多(N)的一方</p></li><li>多对多<br> 存储：同一对多<br> 查询：<br> ​    <strong>查询1：课程加入学生</strong><br> ​        <code>cou = Course.objects.filter(c_name=&#39;高数&#39;).first()</code><br> ​        <code>stu = Student.objects.filter(s_name=&#39;杨幂&#39;).first()</code><br> ​        <strong>没设置related_name参数时：</strong><code>课程对象.关联字段</code><br> ​        <code>cou.stu.add(stu)</code><br> ​        <strong>设置related_name参数时：</strong><code>课程对象.关联字段</code><br> ​        <code>cou.stu.add(stu)</code><br> ​    <strong>查询2：学生加入课程</strong><br> ​        <strong>没设置related_name参数时：</strong><code>学生对象.关联模型名的小写_set</code><br> ​        <code>stu.course_set.add(cou)</code><br> ​        <strong>设置related_name参数时：</strong><code>学生对象.related_name参数</code><br> ​        <code>stu.cou.add(cou)</code><br> 定义模型：ManyToManyField: 定义在模型的任何一方都可以</li></ol><h3 id="7-模板"><a href="#7-模板" class="headerlink" title="7.模板"></a>7.模板</h3><pre><code>解析模板文件的位置：    TEMPALATES创建在与应用同级。再在里面创建模板文件。    配置: 在settings.py文件中定义TEMPALTES的目录地址    &#39;DIRS&#39;:[]中添加`os.path.join(BASE_DIR, &#39;templates&#39;)`后端渲染模板：    views.py    使用`render()`渲染模板    传递参数给模板, render(request, 模板名, {key1:value1, key2: value2})前端渲染数据：    模板    解析变量: `{{ 变量 }}`    解析标签: `{% 标签 %} {% end标签 %}`        标签: for</code></pre>]]></content>
      
      
      <categories>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB后端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vim编辑器之神</title>
      <link href="/2018/12/24/vim%E7%BC%96%E8%BE%91%E5%99%A8%E4%B9%8B%E7%A5%9E/"/>
      <url>/2018/12/24/vim%E7%BC%96%E8%BE%91%E5%99%A8%E4%B9%8B%E7%A5%9E/</url>
      
        <content type="html"><![CDATA[<h1 id="vim编辑器之神"><a href="#vim编辑器之神" class="headerlink" title="vim编辑器之神"></a>vim编辑器之神</h1><h3 id="配置vimrc配置"><a href="#配置vimrc配置" class="headerlink" title="配置vimrc配置"></a>配置vimrc配置</h3><p>在shell中可以通过 <code>vim ~/.vimrc</code> 或者 <code>vim /etc/vimrc</code> 打开vimrc文件对vim进行配置。在这个文件中可以进行很多和vim相关的配置，常用的如下（如果对其他配置感兴趣的可以自己百度）：</p><p><img src="/img/vim1.png" alt="vim1"> </p><h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><h4 id="1-模式切换"><a href="#1-模式切换" class="headerlink" title="1.模式切换"></a>1.模式切换</h4><p>我们可以将vim分为命令模式、编辑模式和末行模式三种<br><strong>命令模式：</strong>进入vim的时候vim是处于命令模式状态下的，这个时候输入内容不会出现在编辑区  (最末什么都没有)</p><p><strong>末行模式：</strong>在命令模式下输入冒号，让vim进入末行模式。在末行模式的冒号后面可以输入相关的一些指令进行相关操作  (最后有一个冒号)</p><p><strong>编辑模式：</strong>在命令模式下按’i’进入编辑模式。在编辑模式下可以对文件内容进行编辑 (最后 –INSERT– 或者 –插入–)  </p><h4 id="2-保存和退出"><a href="#2-保存和退出" class="headerlink" title="2.保存和退出"></a>2.保存和退出</h4><p>在末行模式下输入相应的指令可以对编辑区的内容进行保存和退出vim界面<br><strong>w</strong> – 只保存(类似快捷键ctr+s)<br><strong>q</strong> – 退出（在编辑区的内容全部都保存的情况下才有效）<br><strong>wq</strong> – 保存并退出<br><strong>q!</strong>  – 强制退出（不保存修改信息）    </p><h4 id="3-光标操作"><a href="#3-光标操作" class="headerlink" title="3.光标操作"></a>3.光标操作</h4><p>以下光标操作都是在命令模式下输入的<br><strong>^(shift+6)</strong>  – 移动到行首<br><strong>$(shift+4)</strong>  – 移动到行尾<br><strong>G(shift+g)</strong>    – 移动到文件末尾<br><strong>行号G</strong>            – 移动到指定行,例如:30G, 让光标直接跳转到行号是30的那一行<br><strong>gg</strong>                – 移动到文件开头  </p><h4 id="4-文本操作"><a href="#4-文本操作" class="headerlink" title="4.文本操作"></a>4.文本操作</h4><p>以下操作不带冒号的是在命令模式下输入，前面有冒号代码后面的内容是在末行模式下输入<br><strong>dd</strong>            – 删除光标所在的行<br><strong>数字dd</strong>        – 从光标所在行开始往后面开始删，删除指定数量行内容<br><strong>:%d</strong>        – 删除所有     </p><p><strong>yy</strong>         – 复制光标所在的行<br><strong>数字yy</strong>        – 从光标所在行开始复制指定行数的内容<br><strong>p</strong>            – 将复制的内容粘贴到光标所在的位置<br><strong>u</strong>            – 撤销<br><strong>ctr+r</strong>    – 反撤销    </p><p><strong>:%!sort</strong>  – 对内容排序  </p><p><strong>:/查找对象[/gice]</strong>    – 搜索匹配正则表达式的内容，按回车回到命令模式后按n往前查找，按N往后查找  </p><p>*<em>:1,$s/被替换对象/替换内容[/gice</em>]*    – 将正则表达式匹配到的内容替换成指定内容   </p><pre><code>-    g: 全局匹配  -     i: 忽略大小写 -   c: 替换时需要提示  -   e: 忽略错误  </code></pre>]]></content>
      
      
      <categories>
          
          <category> 系统管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LINUX </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ssh的基本操作</title>
      <link href="/2018/12/24/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/12/24/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="ssh的基本操作"><a href="#ssh的基本操作" class="headerlink" title="ssh的基本操作"></a>ssh的基本操作</h1><h3 id="1-ssh服务器-文字接口连接服务器"><a href="#1-ssh服务器-文字接口连接服务器" class="headerlink" title="1.ssh服务器(文字接口连接服务器)"></a>1.ssh服务器(文字接口连接服务器)</h3><p>SSH是Secure Shell Protocol(安全的壳程序协议)的简写。</p><p>公钥:id_rsa.pub</p><p>1.很多服务器都是需要认证的，ssh认证是其中的一种。在客户端生成公钥，把生成的公钥添加到服务器，你以后连接服务器就不用每次都输入用户名和密码了。</p><p>2.很多git服务器都是用ssh认证方式，你需要把你生成的公钥发送给代码仓库管理员，让他给你添加到服务器上，你就可以通过ssh自由地拉取和提交代码了。</p><p>私钥:id_rsa</p><p>启动SSH服务(默认已经启动)：/etc/init.d/sshd restart</p><h3 id="2-查看本机-ssh-公钥，生成公钥"><a href="#2-查看本机-ssh-公钥，生成公钥" class="headerlink" title="2.查看本机 ssh 公钥，生成公钥"></a>2.查看本机 ssh 公钥，生成公钥</h3><p>生成公钥</p><p>1.生成公钥了：<code>ssh-keygen -t rsa</code></p><p>2.接着会确认存放公钥的地址，默认就是上面说的路径，直接enter键确认</p><p>3.接着会要求输入密码和确认密码，如果不想设置密码直接不输入内容 按enter键</p><p>查看 ssh 公钥方法：</p><p>1.通过命令窗口</p><p>a. 打开你的 git bash 窗口</p><p>b. 进入 .ssh 目录：cd ~/.ssh</p><p>c. 找到 id_rsa.pub 文件：ls</p><p>d. 查看公钥：cat id_rsa.pub 或者 vim id_rsa.pub</p><p>2.或者你也可以直接输入命令 ：cat ~/.ssh/id_rsa.pub</p><p>3.或者你也可以直接打开你用户（一般都是 Administrator）下的 .ssh 文件夹，打开它里面的 id_rsa.pub 文件.</p><h3 id="3-通过ssh连接服务器"><a href="#3-通过ssh连接服务器" class="headerlink" title="3.通过ssh连接服务器"></a>3.通过ssh连接服务器</h3><p><code>ssh 账号@主机ip</code></p><h3 id="4-给服务器添加公钥-阿里"><a href="#4-给服务器添加公钥-阿里" class="headerlink" title="4.给服务器添加公钥(阿里)"></a>4.给服务器添加公钥(阿里)</h3><p>cd ~/.ssh</p><p>vim authorized_keys 然后在里面加入自己本地的公钥</p><h3 id="5-远程添加"><a href="#5-远程添加" class="headerlink" title="5.远程添加"></a>5.远程添加</h3><p>文件异地直接复制:SCP</p><p><img src="/img/scp1.png" alt=""></p><p>scp id_rsa.pub root@主机地址:~/.ssh/ddf.pub              </p><p>cat ddf.pub &gt;&gt;authorized_keys         累加进                          </p><h3 id="6-退出"><a href="#6-退出" class="headerlink" title="6.退出"></a>6.退出</h3><p><code>ssh -T url</code>测试是否设置成功<br>logout</p>]]></content>
      
      
      <categories>
          
          <category> 技术类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux操作篇</title>
      <link href="/2018/12/22/linux%E6%93%8D%E4%BD%9C%E7%AF%87/"/>
      <url>/2018/12/22/linux%E6%93%8D%E4%BD%9C%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>ls<br>cd<br>mv<br>cp<br>grep<br><a href="https://ddf118.github.io/2018/12/24/vim编辑器之神/">vim</a></p>]]></content>
      
      
      <categories>
          
          <category> 系统管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LINUX </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>博客搭建篇</title>
      <link href="/2018/12/22/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AF%87/"/>
      <url>/2018/12/22/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h3 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h3><h4 id="一-注册github并创建自己的仓库"><a href="#一-注册github并创建自己的仓库" class="headerlink" title="一.注册github并创建自己的仓库"></a>一.注册<a href="https://github.com/" target="_blank" rel="noopener">github</a>并创建自己的仓库</h4><ol><li><p><strong>在github上注册账号</strong></p></li><li><p><strong>创建仓库</strong></p><p> 名字一定的是你的 username.github.io,不然无法通过username.github.io访问</p></li></ol><h4 id="二-HEXO"><a href="#二-HEXO" class="headerlink" title="二. HEXO"></a>二. <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">HEXO</a></h4><ol><li><strong>环境搭建——要使用Hexo,需要安装Nodejs以及Git</strong></li></ol><p>安装Node.js</p><p> <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">下载Node.js</a></p><p> <a href="http://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">安装Node.js</a></p><p>node -v 查看node的版本</p><p>安装Git</p><p> <a href="https://git-scm.com/download/" target="_blank" rel="noopener">下载git</a></p><p> <a href="">中文安装提示</a></p><p>git version 查看git的版本</p><ol start="2"><li><p><strong>安装Hexo</strong></p><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">详情</a></p></li></ol><p>在你需要安装Hexo的目录下(新建一个文件夹)右键选择 Git Bash</p><p><code>npm install -g hexo-cli</code>    #使用 npm 安装 Hexo</p><p><code>hexo init [folder]</code>  #新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。</p><p><code>npm install</code> #若安装不完整，则进入安装的文件夹安装没安装好的</p><p><code>hexo g</code> #生成静态文件(hexo generate)</p><p><code>hexo s</code>#启动本地服务器(hexo server)。默认情况下，访问网址为：<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a></p><p><code>npm install --save hexo-deployer-git</code> #安装git扩展插件,让hexo可以通过git方式部署</p><p><code>npm list hexo-deployer-git</code> #显示插件是否安装成功及版本</p><p>部署前需要编辑网站配置文件(根目录下_config.yml文件)</p><p>deploy:<br>​    type: git<br>​    repo: <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:username/username.github.io.git  #这里的网址填你自己的<br>​    branch: master </p><p>type模式选择为git后，为方便请先设置ssh公钥登录github。<br>repo在设置公钥后可使用ssh地址。<br>若repo使用https地址则需要配置凭证。可使用命令<code>git config --global credential.helper wincred</code>，此为配置git，<a href="https://ddf118.github.io/2018/12/20/git操作篇/">详见</a></p><p><code>hexo d</code> #部署网站(hexo deploy)</p><ol start="3"><li><strong>添加主题</strong></li></ol><p><code>hexo clean</code> #清除缓存</p><p><code>git clone 主题地址</code></p><p>主题需要保存在themes文件夹里。网站配置文件(根目录下_config.yml文件)里的theme后也需要写主题名字。</p><ol start="4"><li><strong>更新博客基本操作</strong></li></ol><p>hexo clean(更改主题后必用)</p><p>hexo g</p><p>hexo d</p><ol start="5"><li><p><strong>ssh授权</strong></p><p><a href="https://ddf118.github.io/2018/12/24/ssh的基本操作/">详见</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hexo操作篇</title>
      <link href="/2018/12/22/hexo%E6%93%8D%E4%BD%9C%E7%AF%87/"/>
      <url>/2018/12/22/hexo%E6%93%8D%E4%BD%9C%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h2 id="一-添加分类"><a href="#一-添加分类" class="headerlink" title="一.添加分类"></a>一.添加分类</h2><p>1.创建分类<br><code>categories</code>页是用来展示所有分类的页面，如果在你的博客<code>source</code>目录下还没有<code>categories/index.md</code>文件，那么你就需要新建一个，命令如下：</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"categories"</span></code></pre><p>创建完成后,打开创建分类中的index.md。</p><p>在其中添加<code>type: &quot;categories&quot;</code>,<code>layout: &quot;categories&quot;</code></p><p>2.给文章添加分类属性</p><p>打开需要添加分类的文章，为其添加分类属性。categories: -web 表示添加这篇文章到“web”这个分类。注意：hexo一篇文章只能属于一个分类，也就是说如果在“- web”下方添加“-xxx”，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web”下的 “-xxx ”分类）。</p><h2 id="二-添加分类及标签"><a href="#二-添加分类及标签" class="headerlink" title="二.添加分类及标签"></a>二.添加分类及标签</h2><p>1.创建标签</p><p>hexo new page “tags”</p><p>创建完成后,打开创建分类中的index.md。</p><p>在其中添加<code>type: &quot;tags&quot;</code>,<code>layout: &quot;tags&quot;</code></p><p>2.给文章添加标签属性</p><p>打开需要添加分类的文章，为其添加分类属性。tags: -web 表示添加这篇文章到“web”这个标签。注意：hexo一篇文章只能属于一个分类，也就是说如果在“- web”下方添加“-xxx”，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web”下的 “-xxx ”分类）。</p><h2 id="三-给自定义添加"><a href="#三-给自定义添加" class="headerlink" title="三.给自定义添加"></a>三.给自定义添加</h2><p>类似上面操作</p>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HEXO </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>GIT操作篇</title>
      <link href="/2018/12/20/git%E6%93%8D%E4%BD%9C%E7%AF%87/"/>
      <url>/2018/12/20/git%E6%93%8D%E4%BD%9C%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h3 id="Git简介"><a href="#Git简介" class="headerlink" title="Git简介"></a>Git简介</h3><p>Git是目前世界上最先进的分布式版本控制系统。Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p><h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p>现在，Git可以在Linux、Unix、Mac和Windows这<br>几大平台上正常运行了。<br>1.linux上安装Git<br>2.windows上安装Git<br> <a href="https://git-scm.com/download/" target="_blank" rel="noopener">下载Git</a>,然后一路默认。<br> <a href="">中文参考</a></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="设定自己机器的全局变量"><a href="#设定自己机器的全局变量" class="headerlink" title="设定自己机器的全局变量"></a>设定自己机器的全局变量</h4><p><code>git config --global user.name &quot;Your Name&quot;</code>—— 设定用户名字，随便写<br> <code>git config --global user.email &quot;email@example.com&quot;</code> ——设定用户邮箱，随便写<br>注意git config命令的–global参数，用了这个参数，表明你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和Email地址。</p><h4 id="查看自己机器的配置信息"><a href="#查看自己机器的配置信息" class="headerlink" title="查看自己机器的配置信息"></a>查看自己机器的配置信息</h4><p>config 配置有system级别 global（用户级别） 和local（当前仓库）三个 设置先从system-&gt;global-&gt;local  底层配置会覆盖顶层配置 分别使用–system/global/local 可以定位到配置文件<br><code>git config --system --list</code>——查看系统config<br><code>git config --global  --list</code>——查看当前用户（global）配置<br><code>git config --local  --list</code>—— 查看当前仓库配置信息<br><code>git config --list</code>——查看全配置</p><h4 id="额外配置"><a href="#额外配置" class="headerlink" title="额外配置"></a>额外配置</h4><p><code>git config --global credential.helper wincred</code>——凭证存储<br><code>git config --global color.ui true</code>——开启颜色支持<br><code>git config --global core.quotepath false</code>——支持utf-8编码</p><h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p><code>git config --global --replace-all user.email &quot;输入你的邮箱&quot;</code><br><code>git config --global --replace-all user.name &quot;输入你的用户名&quot;</code></p><h3 id="创建版本库（repository）"><a href="#创建版本库（repository）" class="headerlink" title="创建版本库（repository）"></a>创建版本库（repository）</h3><p>mkdir directory——创建一个空目录<br>cd directory<br>windows下目录最好不用中文<br>git init——初始化仓库</p><h3 id="查看仓库状态"><a href="#查看仓库状态" class="headerlink" title="查看仓库状态"></a>查看仓库状态</h3><p>git status</p><h3 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h3><p>touch ddf.txt<br><code>git add ddf.txt</code>——把文件添加到仓库<br><code>git add -A</code>——添加所有文件到仓库<br>这里如果有警告则添加git config –global core.autocrlf false；原因是路径中存在 / 的符号转义问题，false就是不转换符号默认是true，相当于把路径的 / 符号进行转义，这样添加的时候就有问题。<br><code>git commit -m &quot;first&quot;</code>——把文件提交到仓库<br>git commit命令，-m后面输入的是本次提交的说明，可以输入任意内容，当然最好是有意义的，这样你就能从历史记录里方便地找到改动记录。</p><h3 id="回溯操作"><a href="#回溯操作" class="headerlink" title="回溯操作"></a>回溯操作</h3><p>git dif——查看difference，即查看修改内容<br>git log——查看提交历史，以便确定要回退到哪个版本。<br>记住：commit_id（版本号）<br><code>git reset --hard HEAD^</code>——HEAD指向的版本就是当前版本，该指令即为回到上个操作版本<br><code>git reset --hard commit_id</code>——回溯到相应版本<br><code>git reflog</code>——查看命令历史，以便确定要回到未来的哪个版本。</p><h3 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h3><p> <code>git checkout -- ddf.txt</code></p><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p> rm ddf.txt</p><h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><p>git push——推送，第一次后即用<br><code>git push  -u origin master</code>——第一次推送master分支的所有内容<br>关联操作后面补充！！！！！！！！！！！！<br>总的来说都是添加了一个凭证 在windows下可以查看(控制面板-凭据管理器)</p><h3 id="从远程库克隆"><a href="#从远程库克隆" class="headerlink" title="从远程库克隆"></a>从远程库克隆</h3><p>1.通过https克隆<br>git clone url<br>2.通过ssh克隆</p><h3 id="从远程添加到本地"><a href="#从远程添加到本地" class="headerlink" title="从远程添加到本地"></a>从远程添加到本地</h3><p> git pull——拉</p>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIT </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/12/18/hello-world/"/>
      <url>/2018/12/18/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
